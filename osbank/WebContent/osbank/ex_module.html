<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/mui.min.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />
		<link rel="stylesheet" href="css/page.css" type="text/css" charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/pure-min.css" />
		<link rel="stylesheet" type="text/css" href="css/TB-star.css" />
		<link rel="stylesheet" type="text/css" href="css/popover.css" />
		<link href="css/bootstrap-gliphicon/css/bootstrap.min-icon.css" rel="stylesheet" type="text/css">
		<script src="js/preview.js" type="text/javascript" charset="utf-8"></script>
		<style>
			* {
				font-family: "微软雅黑";
			}
			
			body {
				//padding:10px;
				padding-top: 50px;
				background-color: transparent;
			}
			
			.ex {
				margin: 5px;
			}
			/*a.two-stars {
				background-position: 0 -28px
			}*/
			
			.stem,
			.choice {
				font-size: 18px;
				margin: 0;
			}
			
			.stem {
				margin-bottom: 12px;
			}
			
			.choice {
				margin-top: 30px;
			}
			
			li {
				list-style-type: none;
			}
			
			.choice li {
				margin-bottom: 15px;
			}
			
			#title {}
			
			.blank,
			.sa-answer {
				margin-top: 60px;
			}
			
			.blank .mui-input-row {
				margin: auto;
				text-align: center;
				width: 85%;
				border-bottom: 1px solid #ccc;
			}
			
			.file,
			.file:hover {
				position: relative;
				display: inline-block;
				background: #fff6a9;
				border: 1px solid #ffd42a;
				border-radius: 4px;
				padding: 4px 12px;
				overflow: hidden;
				color: #ff9400;
				margin-bottom: 5px;
			}
			
			.file input {
				position: absolute;
				right: 0;
				top: 0;
				opacity: 0;
			}
			
			.glyphicon-ok {
				color: green
			}
			
			.glyphicon-remove {
				color: red
			}
		</style>
        <script>
        	 var urlinfo = decodeURI(window.location.href);  
		    //获取学号
		    var stuNo=urlinfo.split("?")[1];
		    console.log(stuNo);
		    var exJstr=urlinfo.split("&")[1];
		    console.log(exJstr);
		    
		    function askExSuc (resJson) {
		    	
		    }
        </script>
	</head>

	<body>

		<header>
			<div style="width:15%;height:100%;float:left;"></div>
			<div class="nvtt" id='title'>Examine System</div>
			<div class="nvbt"></div>

		</header>
		<div class="ex-detail">
			<!--<div class="ex-detail-item">
				<p class="stem"><span class="question-id">1、</span>进程调度的职责是按给定的__1__ 从__2__ 中选择一个进程，让它占用处理器。</p>
				<p> <span class="glyphicon glyphicon-ok"></span></p>
				<p> 你的答案：<span>PCB</span> 参考答案：<span>进程控制块/PCB</span></p>
				<p> <span class="glyphicon glyphicon-remove" </span></p>
				<p> 你的答案：<span>PCB</span> 参考答案：<span>进程控制块/PCB</span></p>
			</div>

			<div class="ex-detail-item">
				<p class="stem"><span class="question-id">1、</span>所谓多道程序设计，即指每一时刻有若干个进程在执行。</p>
				<p> <span class="glyphicon glyphicon-ok"></span></p>
				<p> 你的答案：<span>F</span> 参考答案：<span>F</span></p>
			</div>

			<div class="ex-detail-item">
				<p class="stem"><span class="question-id">1、</span>为了使系统中所有的用户都能得到及时的响应，该操作系统应该是 ( )</p>
				<p> <span class="glyphicon glyphicon-remove"></span></p>
				<p> 你的答案：<span>A.ddd</span> 参考答案：<span>B.vvv</span></p>
			</div>-->
		</div>
		<div class="ex-calc ex">
			<p class="stem"><span class="question-id">1、</span>假设有 4 道作业，它们提交的时刻及执行时间由下表给出，计算在单道程序环境下，采用先来先服务调度算法和最短作业优先算法的平均周转时间和平均带权周转时间，并指出它们的调度顺序。
				<table>
					<tr>
						<td>作业号</td>
						<td>提交时刻 ( 小时 )</td>
						<td>执行时间 ( 小时 )</td>
					</tr>
					<tr>
						<td>1</td>
						<td>10:00</td>
						<td>2</td>
					</tr>
					<tr>
						<td>2</td>
						<td>10:20</td>
						<td>1</td>
					</tr>
					<tr>
						<td>3</td>
						<td>10:40</td>
						<td>0.5</td>
					</tr>
					<tr>
						<td>4</td>
						<td>10:50</td>
						<td>0.4</td>
					</tr>
				</table>
				<div class="shop-rating stars">
					<ul class="rating-level ">
						<li>
							<a class="one-star"></a>
						</li>
						<li>
							<a class="two-stars"></a>
						</li>
						<li>
							<a class="three-stars"></a>
						</li>
						<li>
							<a class="four-stars"></a>
						</li>
						<li>
							<a class="five-stars"></a>
						</li>

					</ul>
					<p class="difdeg">(难度系数)</p>

				</div>

				<div class="sa-answer">

					<div id="popover-bg"></div>
					<div id="popover-show">
						<img id="preview-large" src="" style="display: block; width: 100%; height: 100%;">
					</div>

					<div id="localImag"><img id="preview" style=" width: 50px; height: 60px;"></div>
				
					<a href="javascript:;" class="file">选择图片
						<input type="file" name="file" id="doc" onchange="javascript:setImagePreview();">
					</a>
					<textarea id="textarea" rows="6" placeholder="此处作答..."></textarea>

				</div>
		</div>

		<div class="ex-sa ex">
			<p class="stem"><span class="question-id">1、</span>请概述高级调度、低级调度的主要任务是什么？为什么要引入中级调度？</p>
				<div class="shop-rating stars">
					<ul class="rating-level ">
						<li>
							<a class="one-star"></a>
						</li>
						<li>
							<a class="two-stars"></a>
						</li>
						<li>
							<a class="three-stars"></a>
						</li>
						<li>
							<a class="four-stars"></a>
						</li>
						<li>
							<a class="five-stars"></a>
						</li>

					</ul>
					<p class="difdeg">(难度系数)</p>

				</div>

				<div class="sa-answer">

					<textarea id="textarea" rows="6" placeholder="此处作答..."></textarea>

				</div>
		</div>

		<div class="ex-fb ex">
			<p class="stem"><span class="question-id">1、</span>进程调度的职责是按给定的__1__ 从__2__ 中选择一个进程，让它占用处理器。</p>
				<div class="shop-rating stars">
					<ul class="rating-level ">
						<li>
							<a class="one-star"></a>
						</li>
						<li>
							<a class="two-stars"></a>
						</li>
						<li>
							<a class="three-stars"></a>
						</li>
						<li>
							<a class="four-stars"></a>
						</li>
						<li>
							<a class="five-stars"></a>
						</li>

					</ul>
					<p class="difdeg">(难度系数)</p>

				</div>

				<div class="blank">

					<div class="mui-input-row">
						<label>(1)</label>
						<input type="text" class="mui-input-clear" placeholder="此处填写答案">
					</div>
					<div class="mui-input-row">
						<label>(2)</label>
						<input type="text" class="mui-input-clear" placeholder="此处填写答案">
					</div>
				</div>
		</div>
		<div class="ex-judge ex">
			<p class="stem"><span class="question-id">1、</span>所谓多道程序设计，即指每一时刻有若干个进程在执行。</p>			
				<div class="shop-rating stars">
				<ul class="rating-level ">
					<li>
						<a class="one-star"></a>
					</li>
					<li>
						<a class="two-stars"></a>
					</li>
					<li>
						<a class="three-stars"></a>
					</li>
					<li>
						<a class="four-stars"></a>
					</li>
					<li>
						<a class="five-stars"></a>
					</li>

				</ul>
				<p class="difdeg">(难度系数)</p>
			</div>
			
			<ul class="choice">
				<li><input type="radio" name="choice" id="judge-1-T" />
					<label for="judge-1-T" class="check-box"></label> 正确</li>
				<li>
					<input type="radio" name="choice" id="judge-1-F" />
					<label for="judge-1-F" class="check-box"></label> 错误</li>
				</ul>

		</div>
		
		<div class="ex-ss">
			<p class="stem"><span class="question-id">1、</span>为了使系统中所有的用户都能得到及时的响应，该操作系统应该是 ( )</p>
			<div class="shop-rating  stars">
				<ul class="rating-level">
					<li>
						<a class="one-star"></a>
					</li>
					<li>
						<a class="two-stars"></a>
					</li>
					<li>
						<a class="three-stars"></a>
					</li>
					<li>
						<a class="four-stars"></a>
					</li>
					<li>
						<a class="five-stars"></a>
					</li>

				</ul>
				<p class="difdeg">(难度系数)</p>
			</div>
			
			<ul class="choice">
				<li><input type="radio" name="choice" id="ss-1-A" />
					<label for="ss-1-A" class="check-box"></label> A.多道批处理系统</li>
				<li>
					<input type="radio" name="choice" id="ss-1-B" />
					<label for="ss-1-B" class="check-box"></label> B.分时系统</li>
				<li>
					<input type="radio" name="choice" id="ss-1-C" />
					<label for="ss-1-C" class="check-box"></label> C.实时系统</li>
				
				<li>
					<input type="radio" name="choice" id="ss-1-D" />
					<label for="ss-1-D" class="check-box"></label> D.网络系统</li> 
			</ul>

		</div>

		<div id="pageNag">
			<button type="button" id="preBut" class="button pure-button" style="background: #93B230"> &lt;&lt;prev </button>
			<button type="button" id="nextBut" class="button pure-button" style="background: #93B230">next>></button>
		</div>

		<script src="js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var exJsons = [{
					"type": "ex_ss",
					"id": 2,
					"stem": "为了使系统中所有的用户都能得到及时的响应，该操作系统应该是 (    )",
					"option": "A.多道批处理系统&B.分时系统&C.实时系统&D.网络系统",
					"answer": "B",
					"difdeg": 1
				},

				{
					"type": "ex_ss",
					"id": 3,
					"stem": "多个进程的实体能存在于同一内存中，在一段时间内都得到运行这种性质称作进程的(    )",
					"option": "A.动态性&B.并发性&C.调度性&D.异步性",
					"answer": "B",
					"difdeg": 1
				},

				{
					"type": "ex_ss",
					"id": 4,
					"stem": "避免死锁的一个著名的算法是(    )",
					"option": "A．先人先出算法&B．优先级算法&C．银行家算法&D．资源按序分配法",
					"answer": "C",
					"difdeg": 1
				}, {
					"type": "ex_ss",
					"id": 5,
					"stem": " 操作系统中利用信号量和P、V操作(    )",
					"option": "A．只能实现进程的互斥&B．只能实现进程的同步&C．可实现进程的互斥和同步&D．可完成进程调度</li>",
					"answer": "C",
					"difdeg": 4
				}

				,

				{
					"type": "ex_fb",
					"id": 2,
					"stem": "特权指令只能在_管或系统__1__态下执行，若在__2__态下执行则被认为是非法指令。",
					"answer": {
						
						"unordered":["管或系统","目或用户"]
						
					},
					"difdeg": 3
				}, {
					"type": "ex_fb",
					"id": 3,
					"stem": "进程调度的职责是按给定的__1__ 从__2__ 中选择一个进程，让它占用处理器。",
					"answer": {
						"1": ["进程调度算法","调度算法"],
						"2": "就绪队列"
					},
					"difdeg": 2
				}

				,

				{
					"type": "ex_judge",
					"id": 2,
					"stem": "所谓多道程序设计，即指每一时刻有若干个进程在执行。",
					"answer": "F",
					"difdeg": 2
				},

				{
					"type": "ex_judge",
					"id": 3,
					"stem": "采用多道程序设计的系统中，系统的程序道数越多，系统效率越高。",
					"answer": "F",
					"difdeg": 2
				}, {
					"type": "ex_sa",
					"id": 2,
					"stem": "请概述高级调度、低级调度的主要任务是什么？为什么要引入中级调度？",
					"answer": "高级调度，其主要任务是按一定的原则对外存上处于后备状态的作业进行。低级调度，其主要任务是按照某种策略和方法选取一个处于就绪状态的进程，将处理机分配给它。为了提高内存利用率和系统吞吐量，引入了中级调度。",
					"difdeg": 4
				}, {
					"type": "ex_sa",
					"id": 3,
					"stem": "试画出进程5态转换图，并说明状态之间转换的典型原因。",
					"answer": "略",
					"difdeg": 2
				},

				{
					"type": "ex_calc",
					"id": 2,
					"stem": "假设有 4 道作业，它们提交的时刻及执行时间由下表给出，计算在单道程序环境下，采用先来先服务调度算法和最短作业优先算法的平均周转时间和平均带权周转时间，并指出它们的调度顺序。<table><tr><td>作业号</td><td>提交时刻 ( 小时 )</td><td>执行时间 ( 小时 )</td></tr><tr><td>1</td><td>10:00</td><td>2</td></tr><tr><td>2</td><td>10:20</td><td>1</td></tr><tr><td>3</td><td>10:40</td><td>0.5</td></tr><tr><td>4</td><td>10:50</td><td>0.4</td></tr></table>",
					"answer": "略",
					"difdeg": 4
				}, {
					"type": "ex_calc",
					"id": 3,
					"stem": "对于一个将页表存放在内存中的分页系统：（1）如果访问内存需要0.2微妙，有效访问时间为多少？（2）如果加一个快表，且假定在快表中找到页表项的几率高达90%，则有效访问时间又是多少（假定查快表需花的时间为0）？",
					"answer": "分页系统要访问两次，第一次要访问页表，将页号换成页地址，并与偏移量相加，得出实际地址，第二次要访问实际的地址的，所以所用时间是0.4μs，如果有快表，命中率为90%，则访问时间为0.2*90%+0.4*10%=0.18+0.04=0.22μs",
					"difdeg": 3
				}

			]

			var questionId = 1,
				exHtmls = [],
				exDifdegs = [],
				detailHtmls = [],
				userAnswers = [];
			var starClasses = [".one-star", ".two-stars", ".three-stars", ".four-stars", ".five-stars"];
			for(var i in exJsons) {

				var ex = exJsons[i];

				if("ex_ss" == ex.type) {

					var opt = ex.option.split("&");
					var ss = ex;
					var ssHtml = '<div class="ex-ss">' +
						'<p class="stem"><span class="question-id">' + questionId + '、</span>' + ss.stem + '</p>' +
						'<div class="shop-rating  stars">' +
						'<ul class="rating-level">' +
						'<li><a class="one-star"></a></li>' +
						'<li><a class="two-stars"></a></li>' +
						'<li><a class="three-stars"></a></li>' +
						'<li><a class="four-stars"></a></li>' +
						'<li><a class="five-stars"></a></li>' +
						'</ul>' +
						'<p class="difdeg">(难度系数)</p>' +
						'</div>' +

						'<ul class="choice">' +
						'<li><input type="radio" value="A" name="choice" id="ss-' + questionId + '-A" />' +
						'<label for="ss-' + questionId + '-A" class="check-box"></label>' + opt[0] + '</li>' +
						'<li>' +
						'<input type="radio" value="B"  name="choice" id="ss-' + questionId + '-B" />' +
						'<label for="ss-' + questionId + '-B" class="check-box"></label> ' + opt[1] + '</li>' +
						'<li>' +
						'<input type="radio" value="C" name="choice" id="ss-' + questionId + '-C" />' +
						'<label for="ss-' + questionId + '-C" class="check-box"></label> ' + opt[2] + '</li>' +

						'<li>' +
						'<input type="radio" value="D" name="choice" id="ss-' + questionId + '-D" />' +
						'<label for="ss-' + questionId + '-D" class="check-box"></label> ' + opt[3] + '</li> ' +
						'</ul>' +

						'</div>';
					//alert("fin");

					/*document.querySelector(".container-ex").innerHTML=ssHtml;
		document.querySelector(starClasses[ss.difdeg-1]).style.backgroundPosition='0 -28px';
*/
					questionId++;
					exHtmls.push(ssHtml);
					exDifdegs.push(ss.difdeg);
					//	resJson.push(new ExResult("ex_ss", ss.id));
					//resJson[0].userAnswer="B";
					//console.log(resJson[0]);
				} else if('ex_judge' == ex.type) {

					var jd = ex;
					var jdHtml = '<div class="ex-judge ex">' +
						'<p class="stem"><span class="question-id">' + questionId + '、</span>' + jd.stem + '</p>' +
						'<div class="shop-rating  stars">' +
						'<ul class="rating-level">' +
						'<li><a class="one-star"></a></li>' +
						'<li><a class="two-stars"></a></li>' +
						'<li><a class="three-stars"></a></li>' +
						'<li><a class="four-stars"></a></li>' +
						'<li><a class="five-stars"></a></li>' +
						'</ul>' +
						'<p class="difdeg">(难度系数)</p>' +
						'</div>' +

						'<ul class="choice">' +
						'<li><input type="radio" value="T" name="choice" id="judge-' + questionId + '-T" />' +
						'<label for="judge-' + questionId + '-T" class="check-box"></label> 正确</li>' +
						'<li>' +
						'<input type="radio"  value="F" name="choice" id="judge-' + questionId + '-F" />' +
						'<label for="judge-' + questionId + '-F" class="check-box"></label> 错误</li>' +
						'</ul>' +

						'</div>';
					//document.querySelector(".container-ex").innerHTML=jdHtml;
					//document.querySelector(starClasses[jd.difdeg-1]).style.backgroundPosition='0 -28px';
					questionId++;
					exHtmls.push(jdHtml);
					exDifdegs.push(jd.difdeg);
				} else if('ex_fb' == ex.type) {

					var fb = ex;
					var fbHtml = '<div class="ex-fb ex">' +
						'<p class="stem"><span class="question-id">' + questionId + '、</span>' + fb.stem + '</p>' +
						'<div class="shop-rating  stars">' +
						'<ul class="rating-level">' +
						'<li><a class="one-star"></a></li>' +
						'<li><a class="two-stars"></a></li>' +
						'<li><a class="three-stars"></a></li>' +
						'<li><a class="four-stars"></a></li>' +
						'<li><a class="five-stars"></a></li>' +
						'</ul>' +
						'<p class="difdeg">(难度系数)</p>' +
						'</div>' +

						'<div class="blank">';

					//计算空格个数
					var s = fb.stem;
					var  re  =  new  RegExp("__[0-9]__", "g");
					var  arr  =  s.match(re);
					var blankLen = arr.length;

					for(var i = 1; i <= blankLen; i++) {
						var blank = '<div class="mui-input-row">' +
							'<label>(' + i + ')</label>' +
							'<input type="text" class="mui-input-clear" placeholder="此处填写答案">' +
							'</div>';
						fbHtml += blank;
					}

					fbHtml += '</div></div>';
					/*document.querySelector(".container-ex").innerHTML=fbHtml;
		document.querySelector(starClasses[fb.difdeg-1]).style.backgroundPosition='0 -28px';
*/
					questionId++;
					exHtmls.push(fbHtml);
					exDifdegs.push(fb.difdeg);

				} else if('ex_sa' == ex.type) {

					var sa = ex;
					var saHtml = '<div class="ex-sa ex">' +
						'<p class="stem"><span class="question-id">' + questionId + '、</span>' + sa.stem + '</p>' +
						'<div class="shop-rating  stars">' +
						'<ul class="rating-level">' +
						'<li><a class="one-star"></a></li>' +
						'<li><a class="two-stars"></a></li>' +
						'<li><a class="three-stars"></a></li>' +
						'<li><a class="four-stars"></a></li>' +
						'<li><a class="five-stars"></a></li>' +
						'</ul>' +
						'<p class="difdeg">(难度系数)</p>' +
						'</div>' +

						'<div class="sa-answer">' +

						'<textarea id="textarea" rows="6" placeholder="此处作答..."></textarea>' +

						'</div>' +
						'</div>';

					/*  document.querySelector(".container-ex").innerHTML=saHtml;
		document.querySelector(starClasses[sa.difdeg-1]).style.backgroundPosition='0 -28px';
*/
					questionId++;
					exHtmls.push(saHtml);
					exDifdegs.push(sa.difdeg);
				} else if('ex_calc' == ex.type) {

					var ca = ex;
					var caHtml = '<div class="ex-calc ex">' +
						'<p class="stem"><span class="question-id">' + questionId + '、</span>' + ca.stem + '</p>' +
						'<div class="shop-rating  stars">' +
						'<ul class="rating-level">' +
						'<li><a class="one-star"></a></li>' +
						'<li><a class="two-stars"></a></li>' +
						'<li><a class="three-stars"></a></li>' +
						'<li><a class="four-stars"></a></li>' +
						'<li><a class="five-stars"></a></li>' +
						'</ul>' +
						'<p class="difdeg">(难度系数)</p>' +
						'</div>' +

						'<div class="sa-answer">' +

						'<div id="popover-bg"></div>' +
						'<div id="popover-show">' +
						'<img id="preview-large" src="" style="display: block; width: 100%; height: 100%;">' +
						'</div>' +

						'<div id="localImag"><img id="preview" style=" width: 50px; height: 60px;"></div>' +

						'<a href="javascript:;" class="file">选择图片' +
						'<input type="file" name="file" id="doc" onchange="javascript:setImagePreview();">' +
						'</a>' +
						'<textarea id="textarea" rows="6" placeholder="此处作答..."></textarea>' +

						'</div>' +
						'</div>';
					/* document.querySelector(".container-ex").innerHTML=caHtml;
		document.querySelector(starClasses[ca.difdeg-1]).style.backgroundPosition='0 -28px';
*/
					questionId++;
					exHtmls.push(caHtml);
					exDifdegs.push(ca.difdeg);
				}

				//显示第一题
			}
			document.querySelector(".container-ex").innerHTML = exHtmls[0];
			document.querySelector(starClasses[exDifdegs[0] - 1]).style.backgroundPosition = '0 -28px';

			//处理pre,next
			var nowId = 0;
			document.getElementById('preBut').addEventListener('click', function() {
				if(nowId == 0) alert("前面没题了");
				else {
					nowId--;
					document.querySelector(".container-ex").innerHTML = exHtmls[nowId];
					document.querySelector(starClasses[exDifdegs[nowId] - 1]).style.backgroundPosition = '0 -28px';

				}
			}, false);
			document.getElementById('nextBut').addEventListener('click', function() {
               
				if(document.querySelector("#nextBut").innerHTML == "提交") {
					alert("submit");
					  getUserAnswersAndGenDetailHtmls(nowId);
					  document.querySelector(".container-ex").innerHTML="";
					  
					  var detail="";
					  
					  for(var i in detailHtmls){
					  	detail+=detailHtmls[i];
					  }
					  
					  document.querySelector(".ex-detail").innerHTML=detail;
					  
					
				} else {

					if(nowId == (exHtmls.length - 2)) {
                         getUserAnswersAndGenDetailHtmls(nowId);
						document.querySelector("#nextBut").innerHTML = "提交";
						document.querySelector("#preBut").style.display = "none";
						nowId++;
						document.querySelector(".container-ex").innerHTML = exHtmls[nowId];
						document.querySelector(starClasses[exDifdegs[nowId] - 1]).style.backgroundPosition = '0 -28px';

					} else {
                          getUserAnswersAndGenDetailHtmls(nowId);
						nowId++;
						document.querySelector(".container-ex").innerHTML = exHtmls[nowId];
						document.querySelector(starClasses[exDifdegs[nowId] - 1]).style.backgroundPosition = '0 -28px';

					}

				}

			}, false);

			// 生成详情页面
			function getUserAnswersAndGenDetailHtmls(exId) {
				switch(exJsons[exId].type) {
					case "ex_ss":
					case "ex_judge":
						{
							
							userAnswers[exId] = ""; //如果没有选择 答案赋值为“”
							var chkObjs = document.getElementsByName("choice");
							for(var i = 0; i < chkObjs.length; i++) {
								if(chkObjs[i].checked) {
									userAnswers[exId] = chkObjs[i].value;
									console.log(exId + ":" + userAnswers[exId]);
								}
							}
							
							var iconClass = (userAnswers[exId] == exJsons[exId].answer) ? "ok" : "remove";

							var exHtml = '<div class="ex-detail-item">' +
								'<p class="stem"><span class="question-id">' + (exId + 1) + '、</span>' + exJsons[exId].stem + '</p>' +
								'<p> <span class="glyphicon glyphicon-' + iconClass + '"></span></p>' +
								'<p> 你的答案：<span>' + userAnswers[exId] + '</span> 参考答案：<span>' + exJsons[exId].answer + '.' + '</span></p>' +
								'</div>';

							detailHtmls[exId] = exHtml;

							break;
						}
					case "ex_fb":
						{
							var blanks = document.querySelectorAll(".mui-input-clear");
							//console.log(blanks);
							//console.log(typeof blanks);
							var ansJson = exJsons[exId].answer;
							/*console.log(ansStr);
							if(ansStr==""){
								//alert未填写("")
							}*/
							//var ansJson = JSON.parseJSON(ansStr);
							var unorder = ansJson.unordered;
							var exHtml = '<div class="ex-detail-item">' +
								'<p class="stem"><span class="question-id">' + (exId + 1) + '、</span>' + exJsons[exId].stem + '</p>' ;

								//如果答案中不存在无序项

								if(unorder == null) {
                                   var bans=[];
                                   for(var key in ansJson)
                                   {
								    //console.log("key:"+key+" "+ansJson[key]);
								    bans[parseInt(key)-1]=ansJson[key];
							       }
                                   var userAns=[];
                                  // console.log(blanks.length);
									for(var i = 0; i <blanks.length; i++) {
										var iconClass,referenceStr="";
										userAns.push(blanks[i].value) //= ;
										//var bans = ansJson.("b" + i);
										if(typeof bans[i] == "object") { //答案为数组
                                              iconClass="remove";
                                              for(var j in bans[i]) {
                                              	
                                              	if(bans[i][j]==blanks[i].value) {
                                              	iconClass="ok";}
                                              	referenceStr+=(bans[i][j]+'/')
                                              }
                                              referenceStr=referenceStr.substring(0,referenceStr.length-1);//去除最后一个/
										} else if(typeof bans[i] == "string") {
											iconClass = (userAnswers[exId] == bans[i]) ? "ok" : "remove";
											referenceStr=bans[i];
										}
										
										var item = '<p> <span class="glyphicon glyphicon-' + iconClass + '"></span></p>'+
											'<p> 你的答案：<span>' + blanks[i].value + '</span> 参考答案：<span>' + referenceStr+ '</span></p>';

											exHtml += item;
									}
                                    userAnswers[exId]=userAns;//数组[ , , ]
                                    console.log(userAnswers[exId]);
									exHtml += '</div>';

									detailHtmls[exId] = exHtml;
								} else {//答案无序
									    //空全填对才算正确,否则错误
                                       var allAnswers=getAllAnswers(unorder);
                                       //console.log(allAnswers);
                                       
                                       
                                       var iconClass="remove",integrateStr="",showStr="",userAns=[];//用户答案组合在一起
                                       for(var i = 0; i <blanks.length; i++) {
										
										userAns.push(blanks[i].value); //= ;
										integrateStr+=blanks[i].value;
										showStr+=(blanks[i].value+" ");
										}
                                       
                                       for(var i in allAnswers){ 
                                         if(integrateStr==allAnswers[i])
                                          iconClass="ok";
                                       }
										
										
										var item = '<p> <span class="glyphicon glyphicon-' + iconClass + '"></span></p>'+
											'<p> 你的答案：<span>' + showStr + '</span> 参考答案：<span>' + unorder+ '</span></p>';

											exHtml += item;
											
											userAnswers[exId]=userAns;//用户答案组合成数组[ , , ]
                                    //console.log(userAnswers[exId]);
									exHtml += '</div>';

									detailHtmls[exId] = exHtml;
									}
                                    
                                       
                                       
								

							break;
						}
					case "ex_sa":
						{

							userAnswers[exId] = document.querySelector("#textarea").value;

							var exHtml = '<div class="ex-detail-item">' +
								'<p class="stem"><span class="question-id">' + (exId + 1) + '、</span>' + exJsons[exId].stem + '</p>' +

								'</span> 参考答案：<span>' + exJsons[exId].answer + '.' + '</span></p>' +
								'</div>';

							detailHtmls[exId] = exHtml;
							break;
						}
					case "ex_calc":
						{
                         //上传图片未处理
							userAnswers[exId] = document.querySelector("#textarea").value;

							var exHtml = '<div class="ex-detail-item">' +
								'<p class="stem"><span class="question-id">' + (exId + 1) + '、</span>' + exJsons[exId].stem + '</p>' +

								'</span> 参考答案：<span>' + exJsons[exId].answer + '.' + '</span></p>' +
								'</div>';

							detailHtmls[exId] = exHtml;

							break;
						}

				}
			}

			function getAllAnswers(answers) {
				var len = answers.length;

				var permuAns = [],
					tmpAns = [],
					mark = [];

				for(var j = 0; j < len; j++) mark[j] = 0;

				function permutation(cur)

				{
					if(cur == len) {
						var tmp = "";
						for(var i = 0; i < len; i++) tmp += tmpAns[i];
						//console.log(tmp);
						permuAns.push(tmp);
					}
					for(var i = 0; i < len; i++) {
						if(!mark[i]) tmpAns[cur] = answers[i], mark[i] = 1, permutation(cur + 1), mark[i] = 0;

					}
				}

				permutation(0);

				return permuAns;
			}
		</script>
		

	</body>

</html>